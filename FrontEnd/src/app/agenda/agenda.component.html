<div class="container"> 
	<br>
	<span style="text-align:center;"><h1>Agenda</h1></span><br>
	<div class="row"  style="display: flex; justify-content:center; border: 1px solid LightGrey; border-radius:20px; padding: 30px 60px 30px 60px; margin-top:30px; ">
		<div class="col-md-2">
			<label for="">Fecha:</label>
			<input type="date" class="form-control" [ngModel]="fecha" (ngModelChange)="fecha=$event"  required>
		</div>

		<div class="col-md-4">
			<label for="">Clinicas:</label>
			<select class="form-select"  aria-label="Clinicas" [ngModel]="this.clinicasSelectedValue" (ngModelChange)="clinicaSelectValue($event) " required>
				<option *ngFor="let clinica of this.clinicas" [ngValue]="clinica.idclinica">{{clinica.clinica}}</option>
			</select>
		</div>
		<div class="col-md-4">
			<label for="">Areas:</label>
			<select class="form-select"  aria-label="Areas" [ngModel]="this.areasSelectedValue" (ngModelChange)="areasSelectValue($event) " required>
				<option *ngFor="let area of this.areas" [ngValue]="area.idarea">{{area.area}}</option>
			</select>
		</div>
		<div class="col-md-1"><br>
			<button type="button" class="btn btn-primary" (click)="this.buscarAgenda()">Buscar</button>
		</div>
	</div>
	<div class="row" style="display: flex; justify-content:center; " *ngIf="this.showCitas">
		<div class="col-lg-12" style="border: 1px solid LightGrey; border-radius:20px; padding: 30px 30px 30px 30px; margin-top:30px;">
			<table >
				<tbody>
					<tr>
						<td class="cita-encabezado">Empleado</td>
						<td class="cita-encabezado" colspan="10" style="text-align:center;">Citas</td>
					</tr>
					<tr *ngFor="let cita of citas">
						<td class="cita-empleado">{{cita.empleado.persona.nombres}}</td>
						<td *ngFor="let agenda of cita.citas"
							[ngClass]="'cita '+'cita-'+agenda.estado.estado" >
							<span style="font-weight: bold;">{{agenda.hora_ingreso+':00'}}</span><br>{{agenda.cliente.persona.nombres}}
							<br>{{agenda.servicio.servicio}} <br>{{agenda.estado.estado+agenda.estado.idestado}}
						</td>
						<td class="cita" *ngFor="let n of this.counter(10-cita.citas.length); let index = index"></td>
						<td class="cita-boton">
							<button type="button" class="btn btn-primary" (click)="agregarCita(cita.empleado)">Agregar</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="row" style="display: flex; justify-content:center;" *ngIf="this.showIngreso" >
		<div class="col-lg-5" style="border: 1px solid LightGrey; border-radius:20px; padding: 30px 30px 30px 30px; margin-top:30px;">
			<div class="mb-3">
				<label for="empleado" class="form-label" >Empleado</label>
				<input type="text" class="form-control" id="empleado"  [(ngModel)]="this.empleadoText" readonly>
			  </div>
			  <div class="mb-3">
				<label for="">Clientes:</label>
				<select class="form-select"  aria-label="Cliente" [ngModel]="this.clientesSelectedValue" (ngModelChange)="this.clientesSelectValue($event) " required>
					<option *ngFor="let cliente of this.clientes" [ngValue]="cliente.idcliente">{{cliente.persona.nombres+' '+cliente.persona.apellidos }}</option>
				</select>
			</div>
			<div class="mb-3">
				<label for="">Servicios:</label>
				<select class="form-select"  aria-label="Servicios" [ngModel]="this.serviciosSelectedValue" (ngModelChange)="this.serviciosSelectValue($event) " required>
					<option *ngFor="let servicio of this.servicios" [ngValue]="servicio.idservicio">{{servicio.servicio+'-Q'}}{{servicio.precio| number : '1.2-2' }}</option>
				</select>
			</div>
			<div class="mb-3">
				<button type="button" class="btn btn-primary"(click)="guardarCita()" >Guardar</button>
				<button type="button" class="btn btn-danger" style="margin-left: 5px;" (click)="this.showIngreso=false; this.showCitas=true;" >Cancelar</button>
			</div>
		</div>
	</div>
</div>
  
